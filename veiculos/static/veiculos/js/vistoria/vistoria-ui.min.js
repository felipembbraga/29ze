function default_callback(a){$.unblockUI();Dajax.process(a);aplica_mascaras()}function block_screen(){$.blockUI({message:'<img src="/static/veiculos/img/loader.gif"/> <div class="loading-blockui">Processando...<br>Um momento por favor.</div>',css:{"z-index":"9991","border-radius":"10px","border-color":"#D1D1D1"},overlayCSS:{"z-index":"9990","background-color":"#F7F7F7"}})}function requisitar_veiculo(){block_screen();var a=false;if(parseInt($("#turno").val())>0){a=true}Dajaxice.veiculos.requisitar_veiculo(default_callback,{placa:$("#placa-veiculo").val(),turno:a})}function add_veiculo(a){$("#modal-novo-veiculo").modal("hide");block_screen();var b=false;if(parseInt($("#turno").val())>0){b=true}Dajaxice.veiculos.cadastrar_veiculo(default_callback,{placa:$("#placa-veiculo").val(),formulario:a,turno:b})}function buscar_placa(c){var a=$("#error-field-busca-placa");if(c!=""){block_screen();a.hide();var b=false;if(parseInt($("#turno").val())>0){b=true}Dajaxice.veiculos.consultar_veiculo(default_callback,{placa:c,turno:b})}else{a.show();a.html("Informe um valor válido!")}}function change_marca(a){block_screen();Dajaxice.veiculos.change_marca(default_callback,{marca:a})}function change_motorista(b){block_screen();var a=false;if(parseInt($("#turno").val())>0){a=true}Dajaxice.veiculos.consulta_motorista(default_callback,{id_motorista:b,turno:a})}function salva_vistoria(c){block_screen();var a=false;if(parseInt($("#turno").val())>0){a=true}var b=false;if($("#id_alocacao_2_turno").is(":checked")){b=true}Dajaxice.veiculos.cadastrar_vistoria(default_callback,{formulario:c,turno:a,alocacao_2_turno:b})}function desalocar_veiculo(b){block_screen();var a=false;if(parseInt($("#turno").val())>0){a=true}Dajaxice.veiculos.desalocar_veiculo(default_callback,{id_veiculo:$("#id_veiculo_alocado").val(),exibe_vistoria:true,turno:a})}function aplica_mascaras(){$('input[id*="placa"]').mask("aaa-9999")}function nova_busca(b){$.unblockUI();if(b){b.modal("hide")}var a=$("#placa-veiculo");a.val("");a.focus()}function outro_motorista(){var a=$("#s2id_id_motorista");a.find("span.select2-chosen").html("Selecione uma equipe");a.removeClass("select2-allowclear");$("#id_titulo_eleitoral").val("");$("#id_nome").val("");$("#id_endereco").val("");$("#id_id").val("");$("#id_motorista").val("");$("#modal-requisitar-motorista").modal("hide")}function alocacao_por_equipe(b){var a=$("#alocacao-por-equipe");var c=$("#choice-alocacao-manual");if(b=="1"){a.show();c.hide()}else{a.hide();c.show()}}function alocacao_manual(i){var c=$("#div-equipe-manual");var b=$("#s2id_id_equipe_manual");var h=$("#id_equipe_manual");var g=$("#s2id_id_local_manual");var f=$("#id_local_manual");var d=$("#s2id_id_perfil_manual");var a=$("#id_perfil_manual");if(i){c.show()}else{c.hide();b.find("span.select2-chosen").html("Selecione uma equipe");b.removeClass("select2-allowclear");h.val("");g.find("span.select2-chosen").html("Selecione um local");g.removeClass("select2-allowclear");f.val("");d.find("span.select2-chosen").html("Selecione uma função");d.removeClass("select2-allowclear");a.val("")}}function alocacao_2_turno(b){var c=$("#detalhes_alocacao_1_turno");var a=$("#dados_alocacao");if(b){a.show();c.hide()}else{a.hide();c.show()}}$(document).ready(function(){aplica_mascaras();$("body").on("change","#id_marca",function(){change_marca($(this).val())});$("body").on("change","#turno",function(){$("#message-status").hide();var b=$("#cadastrar-vistoria");b.hide();b.find(".panel-body").html("");var a=$("#placa-veiculo");a.focus()});$("body").on("change","#id_alocacao",function(){alocacao_por_equipe($(this).val())});$("body").on("change","#id_motorista",function(){if($(this).val()){change_motorista($(this).val())}else{$("#id_titulo_eleitoral").val("");$("#id_nome").val("");$("#id_endereco").val("");$("#id_id").val("")}});$("body").on("click","#id_alocacao_manual",function(){alocacao_manual($(this).is(":checked"))});$("body").on("click","#id_alocacao_2_turno",function(){alocacao_2_turno($(this).is(":checked"))});$("#placa-veiculo").keypress(function(a){if(a.keyCode==13){buscar_placa($(this).val())}})});