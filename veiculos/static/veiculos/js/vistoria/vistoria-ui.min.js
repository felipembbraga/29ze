function default_callback(a){$.unblockUI();Dajax.process(a);aplica_mascaras()}function block_screen(){$.blockUI({message:'<img src="/static/veiculos/img/loader.gif"/> <div class="loading-blockui">Processando...<br>Um momento por favor.</div>',css:{"z-index":"9991","border-radius":"10px","border-color":"#D1D1D1"},overlayCSS:{"z-index":"9990","background-color":"#F7F7F7"}})}function add_veiculo(){$("#modal-novo-veiculo").modal("toggle");block_screen();Dajaxice.veiculos.cadastrar_veiculo(default_callback,{placa:$("#placa-veiculo").val(),formulario:{}})}function buscar_placa(b){var a=$("#error-field-busca-placa");if(b!=""){block_screen();a.hide();Dajaxice.veiculos.consultar_veiculo(default_callback,{placa:b})}else{a.show();a.html("Informe um valor v√°lido!")}}function change_marca(a){block_screen();Dajaxice.veiculos.change_marca(default_callback,{marca:a})}function change_motorista(a){block_screen();Dajaxice.veiculos.consulta_motorista(default_callback,{id_motorista:a})}function salva_vistoria(a){block_screen();Dajaxice.veiculos.cadastrar_vistoria(default_callback,{formulario:a})}function aplica_mascaras(){$('input[id*="placa"]').mask("aaa-9999")}function nova_busca(b){$.unblockUI();if(b){b.modal("toggle")}var a=$("#placa-veiculo");a.val("");a.focus()}function outro_motorista(){$("#id_titulo_eleitoral").val("");$("#id_nome").val("");$("#id_endereco").val("");$("#id_id").val("");$("#id_motorista").val("");$("#modal-requisitar-motorista").modal("hide")}function alocacao_por_equipe(b){var a=$("#alocacao-por-equipe");var c=$("#choice-alocacao-manual");if(b=="1"){a.show();c.hide()}else{a.hide();c.show()}}$(document).ready(function(){aplica_mascaras();$("body").on("change","#id_marca",function(){change_marca($(this).val())});$("body").on("change","#id_alocacao",function(){alocacao_por_equipe($(this).val())});$("body").on("change","#id_motorista",function(){if($(this).val()){change_motorista($(this).val())}else{$("#id_titulo_eleitoral").val("");$("#id_nome").val("");$("#id_endereco").val("");$("#id_id").val("")}});$("#placa-veiculo").keypress(function(a){if(a.keyCode==13){buscar_placa($(this).val())}})});